<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro - Valentine's</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
</head>
<body class="registro-page">
  <div id="registro-form-container" class="registro-container quiz-container">
    <!-- Progress bar -->
    <div class="quiz-progress-wrap">
      <div class="quiz-progress"><div class="quiz-progress-bar" id="quiz-progress-bar"></div></div>
      <span class="quiz-step-counter" id="quiz-step-counter"></span>
    </div>

    <!-- PRE: CÃ³digo manual (solo si no viene por QR) -->
    <div class="quiz-step" data-step="pre" style="display:none;">
      <h2 class="quiz-question">CÃ³digo de pareja</h2>
      <p class="quiz-sub">Ingresa el cÃ³digo que aparece en la pantalla</p>
      <input type="text" id="codigo_manual" class="quiz-input" placeholder="Ej: A7F3K2" maxlength="6" autocomplete="off">
      <p class="quiz-sub" style="margin-top:20px;">Â¿CuÃ¡l eres tÃº?</p>
      <div class="prefer-options" id="sujeto-manual-options">
        <button type="button" class="prefer-card prefer-card-sm" data-value="A">ğŸ’—<span>CorazÃ³n 1</span></button>
        <span class="prefer-vs">o</span>
        <button type="button" class="prefer-card prefer-card-sm" data-value="B">ğŸ’œ<span>CorazÃ³n 2</span></button>
      </div>
      <p id="registro-error-pre" class="registro-error" style="display:none;"></p>
    </div>

    <!-- 0: Nombre -->
    <div class="quiz-step" data-step="0">
      <h2 class="quiz-question">Â¿CÃ³mo te llamas? ğŸ’«</h2>
      <input type="text" id="nombre" class="quiz-input" placeholder="Tu nombre" maxlength="100" autocomplete="off">
      <button type="button" class="quiz-next-btn" id="btn-nombre-next">Siguiente â†’</button>
    </div>

    <!-- 1: GÃ©nero -->
    <div class="quiz-step" data-step="1">
      <h2 class="quiz-question">Â¿Con quÃ© gÃ©nero te identificas?</h2>
      <div class="chip-group" data-field="genero" data-max="1" data-auto="true">
        <button type="button" class="chip" data-value="Masculino">ğŸ‘¨ Masculino</button>
        <button type="button" class="chip" data-value="Femenino">ğŸ‘© Femenino</button>
        <button type="button" class="chip" data-value="Otro">ğŸŒˆ Otro</button>
        <button type="button" class="chip" data-value="Prefiero no decir">ğŸ¤« Prefiero no decir</button>
      </div>
    </div>

    <!-- 2: Fecha de nacimiento -->
    <div class="quiz-step" data-step="2">
      <h2 class="quiz-question">Â¿CuÃ¡ndo naciste? ğŸ‚</h2>
      <input type="date" id="fecha_nacimiento" class="quiz-input quiz-input-date">
      <div class="zodiac-reveal" id="zodiac-reveal" style="display:none;">
        <span class="zodiac-reveal-symbol" id="zodiac-symbol"></span>
        <span class="zodiac-reveal-name" id="zodiac-name"></span>
      </div>
      <button type="button" class="quiz-next-btn" id="btn-birthday-next">Siguiente â†’</button>
    </div>

    <!-- 3: Dinero vs Amor -->
    <div class="quiz-step" data-step="3">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_dinero_amor">
        <button type="button" class="prefer-card" data-value="Dinero">ğŸ’°<span>Dinero</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="Amor">â¤ï¸<span>Amor</span></button>
      </div>
    </div>

    <!-- 4: Playa vs MontaÃ±a -->
    <div class="quiz-step" data-step="4">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_playa_montana">
        <button type="button" class="prefer-card" data-value="Playa">ğŸ–ï¸<span>Playa</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="MontaÃ±a">ğŸ”ï¸<span>MontaÃ±a</span></button>
      </div>
    </div>

    <!-- 5: Noche vs DÃ­a -->
    <div class="quiz-step" data-step="5">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_noche_dia">
        <button type="button" class="prefer-card" data-value="Noche">ğŸŒ™<span>Noche</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="DÃ­a">â˜€ï¸<span>DÃ­a</span></button>
      </div>
    </div>

    <!-- 6: Netflix vs Salir -->
    <div class="quiz-step" data-step="6">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_netflix_fiesta">
        <button type="button" class="prefer-card" data-value="Netflix en casa">ğŸ¬<span>Netflix en casa</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="Salir de fiesta">ğŸ‰<span>Salir de fiesta</span></button>
      </div>
    </div>

    <!-- 7: Perros vs Gatos -->
    <div class="quiz-step" data-step="7">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_perros_gatos">
        <button type="button" class="prefer-card" data-value="Perros">ğŸ¶<span>Perros</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="Gatos">ğŸ±<span>Gatos</span></button>
      </div>
    </div>

    <!-- 8: Llamada vs Mensaje -->
    <div class="quiz-step" data-step="8">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_llamada_mensaje">
        <button type="button" class="prefer-card" data-value="Llamada">ğŸ“<span>Llamada</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="Mensaje">ğŸ’¬<span>Mensaje</span></button>
      </div>
    </div>

    <!-- 9: CafÃ© vs Chocolate -->
    <div class="quiz-step" data-step="9">
      <h2 class="quiz-question">Â¿QuÃ© prefieres?</h2>
      <div class="prefer-options" data-field="prefer_cafe_chocolate">
        <button type="button" class="prefer-card" data-value="CafÃ©">â˜•<span>CafÃ©</span></button>
        <span class="prefer-vs">VS</span>
        <button type="button" class="prefer-card" data-value="Chocolate">ğŸ«<span>Chocolate</span></button>
      </div>
    </div>

    <!-- 10: Color favorito -->
    <div class="quiz-step" data-step="10">
      <h2 class="quiz-question">Tu color favorito ğŸ¨</h2>
      <div class="chip-group" data-field="color_favorito" data-max="1" data-auto="true">
        <button type="button" class="chip chip-color" data-value="Rojo"><span class="chip-dot" style="background:#e74c3c"></span>Rojo</button>
        <button type="button" class="chip chip-color" data-value="Azul"><span class="chip-dot" style="background:#3498db"></span>Azul</button>
        <button type="button" class="chip chip-color" data-value="Rosa"><span class="chip-dot" style="background:#ff69b4"></span>Rosa</button>
        <button type="button" class="chip chip-color" data-value="Morado"><span class="chip-dot" style="background:#9b59b6"></span>Morado</button>
        <button type="button" class="chip chip-color" data-value="Verde"><span class="chip-dot" style="background:#2ecc71"></span>Verde</button>
        <button type="button" class="chip chip-color" data-value="Negro"><span class="chip-dot" style="background:#2c3e50"></span>Negro</button>
        <button type="button" class="chip chip-color" data-value="Blanco"><span class="chip-dot" style="background:#ecf0f1"></span>Blanco</button>
        <button type="button" class="chip chip-color" data-value="Amarillo"><span class="chip-dot" style="background:#f1c40f"></span>Amarillo</button>
        <button type="button" class="chip chip-color" data-value="Naranja"><span class="chip-dot" style="background:#e67e22"></span>Naranja</button>
      </div>
    </div>

    <!-- 11: MÃºsica favorita (multi) -->
    <div class="quiz-step" data-step="11">
      <h2 class="quiz-question">MÃºsica favorita ğŸµ</h2>
      <p class="quiz-sub">Elige hasta 3</p>
      <div class="chip-group" data-field="musica_favorita" data-max="3">
        <button type="button" class="chip" data-value="ReggaetÃ³n">ReggaetÃ³n</button>
        <button type="button" class="chip" data-value="Pop">Pop</button>
        <button type="button" class="chip" data-value="Rock">Rock</button>
        <button type="button" class="chip" data-value="Bachata">Bachata</button>
        <button type="button" class="chip" data-value="Salsa">Salsa</button>
        <button type="button" class="chip" data-value="ElectrÃ³nica">ElectrÃ³nica</button>
        <button type="button" class="chip" data-value="R&B / Hip Hop">R&B / Hip Hop</button>
        <button type="button" class="chip" data-value="Indie">Indie</button>
        <button type="button" class="chip" data-value="ClÃ¡sica">ClÃ¡sica</button>
        <button type="button" class="chip" data-value="Vallenato">Vallenato</button>
        <button type="button" class="chip" data-value="De todo">De todo</button>
      </div>
      <button type="button" class="quiz-next-btn quiz-next-chips">Siguiente â†’</button>
    </div>

    <!-- 12: Â¿QuÃ© te hace feliz? (multi) -->
    <div class="quiz-step" data-step="12">
      <h2 class="quiz-question">Â¿QuÃ© te hace feliz? ğŸ˜Š</h2>
      <p class="quiz-sub">Elige hasta 3</p>
      <div class="chip-group" data-field="algo_feliz" data-max="3">
        <button type="button" class="chip" data-value="Mi familia">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Mi familia</button>
        <button type="button" class="chip" data-value="Mis amigos">ğŸ‘¯ Mis amigos</button>
        <button type="button" class="chip" data-value="La mÃºsica">ğŸ¶ La mÃºsica</button>
        <button type="button" class="chip" data-value="Viajar">ğŸŒ Viajar</button>
        <button type="button" class="chip" data-value="Comer rico">ğŸ• Comer rico</button>
        <button type="button" class="chip" data-value="Los animales">ğŸ¶ Los animales</button>
        <button type="button" class="chip" data-value="El amor">â¤ï¸ El amor</button>
        <button type="button" class="chip" data-value="Estar tranquilo">ğŸ§˜ Tranquilidad</button>
        <button type="button" class="chip" data-value="Aprender cosas nuevas">ğŸ’¡ Aprender</button>
        <button type="button" class="chip" data-value="Los atardeceres">ğŸŒ… Atardeceres</button>
      </div>
      <button type="button" class="quiz-next-btn quiz-next-chips">Finalizar âœ¨</button>
    </div>

    <p id="registro-error" class="registro-error" style="display:none;"></p>
  </div>

  <!-- Pantalla de espera -->
  <div id="quiz-waiting" class="quiz-waiting-screen" style="display:none;">
    <div class="waiting-content">
      <div class="waiting-hearts">ğŸ’•</div>
      <h2>Â¡Listo!</h2>
      <p>Esperando a que tu pareja termine...</p>
      <div class="waiting-loader"><span></span><span></span><span></span></div>
    </div>
  </div>

  <!-- Pantalla de resultado -->
  <div id="quiz-result" class="quiz-result-screen" style="display:none;">
    <div class="result-content">
      <h2 class="result-title">Compatibilidad</h2>
      <div class="result-circle-wrap">
        <svg class="result-circle" viewBox="0 0 120 120">
          <circle class="result-circle-bg" cx="60" cy="60" r="54" />
          <circle class="result-circle-fill" id="result-circle-fill" cx="60" cy="60" r="54" />
        </svg>
        <div class="result-percentage-inner">
          <span class="result-percentage" id="result-percentage">0</span><span class="result-percent-sign">%</span>
        </div>
      </div>
      <h3 class="result-label" id="result-label"></h3>
      <p class="result-justification" id="result-justification"></p>
      <div class="result-matches" id="result-matches"></div>
      <button type="button" class="quiz-next-btn result-restart-btn" id="btn-restart" onclick="window.location.reload()">Volver al inicio â†©</button>
    </div>
  </div>

  <script type="module" src="registro.js"></script>
</body>
</html>
